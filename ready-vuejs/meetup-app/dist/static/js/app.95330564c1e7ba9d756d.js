webpackJsonp([8],{"4foE":function(t,e){},"6EED":function(t,e,n){"use strict";var i=n("fZjL"),o=n.n(i),r=n("uqrR"),s=n.n(r),a=n("q6Ae"),u=(n.n(a),{users:{}}),c={CREATE_NEW_USER:function(t,e){var n={id:e.uid,meetupKEYS:{},meetups:[]};t.users=n},SET_USER:function(t,e){t.users=e},DELETE_USER:function(t){t.users={}},REGISTER_USER_FOR_MEETUP:function(t,e){t.users.meetups.findIndex(function(t){return t===e})<0&&(t.users.meetups.push(e.meetupID),t.users.meetupKEYS[e.meetupID]=e.meetupKEY)},UNREGISTER_USER_FOR_MEETUP:function(t,e){var n=t.users.meetups;n.splice(n.findIndex(function(t){return t===e}),1),s()(t.users.meetupKEYS,e)}},p={createNewUser:function(t,e){var n=t.commit;n("SET_LOADING",!0),n("CLEAR_ERROR"),a.auth().createUserWithEmailAndPassword(e.email,e.password).then(function(t){n("SET_LOADING",!1),n("CREATE_NEW_USER",t)}).catch(function(t){n("SET_LOADING",!1),n("SET_ERROR",t)})},loginExistingUser:function(t,e){var n=t.commit;n("SET_LOADING",!0),n("CLEAR_ERROR"),a.auth().signInWithEmailAndPassword(e.email,e.password).then(function(t){n("SET_LOADING",!1),n("CREATE_NEW_USER",t)}).catch(function(t){n("SET_LOADING",!1),n("SET_ERROR",t)})},autoLoginExistingUser:function(t,e){(0,t.commit)("SET_USER",{id:e.uid,meetupKEYS:{},meetups:[]})},fetchUserData:function(t){var e=t.commit,n=t.getters;e("SET_LOADING",!0),a.database().ref("/users/"+n.getExistingUser.id+"/registrations/").once("value").then(function(t){e("SET_LOADING",!1);var i=t.val(),o={},r=[];for(var s in i)r.push(i[s]),o[i[s]]=s;var a={id:n.getExistingUser.id,meetups:r,meetupKEYS:o};e("SET_USER",a)}).catch(function(t){console.log(t),e("SET_LOADING",!1)})},onLogoutUser:function(t){var e=t.commit;a.auth().signOut().then(function(){e("DELETE_USER")}).catch(function(t){var e=t.code,n=t.message;console.log(e,n)})}},l={getExistingUser:function(t){return t.users},userIsAuthorized:function(t){return 0!==o()(t.users).length},getUserMeetups:function(t){return t.users.meetups}},E={state:u,mutations:c,actions:p,getters:l};e.a=E},"8Avv":function(t,e,n){"use strict";var i=n("Dd8w"),o=n.n(i),r=n("q6Ae"),s=(n.n(r),{meetups:[]}),a={INIT_MEETUPS:function(t,e){t.meetups=e},CREATE_NEW_MEETUP:function(t,e){t.meetups.push(e)},UPDATE_MEETUP:function(t,e){var n=t.meetups.find(function(t){return t.id===e.id});e.title&&(n.title=e.title),e.description&&(n.description=e.description),e.location&&(n.location=e.location),e.date&&(n.date=e.date),e.time&&(n.time=e.time)}},u={registerUserMeetup:function(t,e){var n=t.commit,i=t.getters;n("SET_LOADING",!0),i.getUserMeetups.findIndex(function(t){return t===e})<0&&r.database().ref("/users/"+i.getExistingUser.id).child("/registrations/").push(e).then(function(t){n("SET_LOADING",!1),n("REGISTER_USER_FOR_MEETUP",{meetupID:e,meetupKEY:t.key})}).catch(function(t){console.log(t),n("SET_LOADING",!1)})},unregisterUserMeetup:function(t,e){var n=t.commit,i=t.getters;n("SET_LOADING",!0);var o=i.getExistingUser;if(o.meetupKEYS){var s=o.meetupKEYS[e];r.database().ref("/users/"+o.id+"/registrations/").child(s).remove().then(function(){n("SET_LOADING",!1),n("UNREGISTER_USER_FOR_MEETUP",e)}).catch(function(t){n("SET_LOADING",!1),console.log(t)})}},loadMeetupsFromFirebase:function(t){var e=t.commit;e("SET_LOADING",!0),r.database().ref("meetups").once("value").then(function(t){var n=[],i=t.val();for(var o in i)n.push({id:o,creator:i[o].creator,title:i[o].title,location:i[o].location,description:i[o].description,date:i[o].date,time:i[o].time,src:i[o].src});e("INIT_MEETUPS",n),e("SET_LOADING",!1)}).catch(function(t){e("SET_LOADING",!1),e("SET_ERROR",t)})},createNewMeetup:function(t,e){var n=t.commit,i=t.getters,s={title:e.title,image:e.image,location:e.location,description:e.description,creator:i.getExistingUser.id,date:e.date,time:e.time},a=null,u=null;r.database().ref("meetups").push(s).then(function(t){return a=t.key}).then(function(t){var n=e.image.name,i=n.slice(n.lastIndexOf("."));return r.storage().ref("meetups/"+t+"."+i).put(e.image)}).then(function(t){return u=t.metadata.downloadURLs[0],r.database().ref("meetups").child(a).update({src:u})}).then(function(){n("CREATE_NEW_MEETUP",o()({},s,{src:u,id:a}))}).catch(function(t){console.log(t)})},updateMeetup:function(t,e){var n=t.commit;n("SET_LOADING",!0);var i={};e.title&&(i.title=e.title),e.description&&(i.description=e.description),e.location&&(i.location=e.location),e.date&&(i.date=e.date),e.time&&(i.time=e.time),r.database().ref("meetups").child(e.id).update(i).then(function(){n("SET_LOADING",!1),n("UPDATE_MEETUP",e)}).catch(function(){n("SET_LOADING",!1)})}},c={getMeetupsShort:function(t,e){return e.getMeetupsSorted.slice(0,3)},getMeetupsSorted:function(t){return t.meetups.sort(function(t,e){return t.date<e.date})},getMeetupFeatured:function(t){return function(e){return t.meetups.find(function(t){return t.id===e})}},getRegisteredMeetups:function(t,e){var n=e.getUserMeetups,i=t.meetups,o=[];for(var r in n)for(var s in i)n[r]===i[s].id&&o.push(i[s]);return o}},p={state:s,mutations:a,actions:u,getters:c};e.a=p},IcnI:function(t,e,n){"use strict";var i=n("7+uW"),o=n("NYxO"),r=n("8Avv"),s=n("6EED"),a=n("XcsR");i.a.use(o.a);var u=new o.a.Store({modules:{meetup:r.a,user:s.a,shared:a.a}});e.a=u},M93x:function(t,e,n){"use strict";function i(t){n("4foE")}var o=n("xJD8"),r=n("QSZQ"),s=n("VU/8"),a=i,u=s(o.a,r.a,a,null,null);e.a=u.exports},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),o=n("3EgV"),r=n.n(o),s=n("M93x"),a=n("YaEn"),u=n("IcnI"),c=n("q6Ae");n.n(c);i.a.use(r.a),i.a.config.productionTip=!1,new i.a({router:a.a,store:u.a,template:"<App/>",components:{App:s.a},created:function(){var t=this;c.initializeApp({apiKey:"AIzaSyAadNrm5igszUCg5d6zv-dC03hS387dfUs",authDomain:"meetup-app-1062e.firebaseapp.com",databaseURL:"https://meetup-app-1062e.firebaseio.com",projectId:"meetup-app-1062e",storageBucket:"gs://meetup-app-1062e.appspot.com",messagingSenderId:"57079436689"}),this.$store.dispatch("loadMeetupsFromFirebase"),c.auth().onAuthStateChanged(function(e){e&&(t.$store.dispatch("autoLoginExistingUser",e),t.$store.dispatch("fetchUserData"))})}}).$mount("#app")},QSZQ:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{light:"light"}},[n("v-navigation-drawer",{attrs:{temporary:"temporary"},model:{value:t.sideNav,callback:function(e){t.sideNav=e},expression:"sideNav"}},[n("v-list",[t._l(t.menuItems,function(e,i){return n("v-list-tile",{key:i,attrs:{to:e.path}},[n("v-list-tile-action",[n("v-icon",[t._v(t._s(e.icon))])],1),n("v-list-tile-content",{staticStyle:{"text-transform":"capitalize"}},[t._v(t._s(e.title))])],1)}),t.userAuthorized?n("v-list-tile",{staticClass:"logout",nativeOn:{click:function(e){t.onLogoutExistingUser()}}},[n("v-list-tile-action",[n("v-icon",{staticClass:"logout__icon"},[t._v("exit_to_app")])],1),n("v-list-tile-content",{staticClass:"logout__title"},[t._v("log out")])],1):t._e()],2)],1),n("v-toolbar",{attrs:{dark:"dark",color:"primary"}},[n("v-toolbar-side-icon",{staticClass:"hidden-sm-and-up",on:{click:function(e){e.stopPropagation(),t.onShowSideNav()}}}),n("v-toolbar-title",[n("router-link",{staticStyle:{cursor:"pointer"},attrs:{tag:"span",to:"/"}},[t._v("Meetup Organizer")])],1),n("v-spacer"),n("v-toolbar-items",{staticClass:"hidden-xs-only"},[t._l(t.menuItems,function(e,i){return n("v-btn",{key:i,attrs:{to:e.path,flat:"flat"}},[n("v-icon",{attrs:{left:"left"}},[t._v(t._s(e.icon))]),t._v(t._s(e.title))],1)}),t.userAuthorized?n("v-btn",{attrs:{flat:"flat"},nativeOn:{click:function(e){t.onLogoutExistingUser()}}},[n("v-icon",{attrs:{left:"left"}},[t._v("exit_to_app")]),t._v("logout")],1):t._e()],2)],1),n("section",{staticClass:"main"},[n("router-view")],1)],1)},o=[],r={render:i,staticRenderFns:o};e.a=r},XcsR:function(t,e,n){"use strict";var i={loading:!1,authenticationError:{}},o={SET_LOADING:function(t,e){t.loading=e},SET_ERROR:function(t,e){t.authenticationError=e},CLEAR_ERROR:function(t){t.authenticationError={}}},r={resetError:function(t){(0,t.commit)("CLEAR_ERROR")}},s={getError:function(t){return t.authenticationError},getLoading:function(t){return t.loading}},a={state:i,mutations:o,actions:r,getters:s};e.a=a},YaEn:function(t,e,n){"use strict";var i=n("7+uW"),o=n("/ocq"),r=n("hlOO"),s=function(){return n.e(4).then(n.bind(null,"zgV5"))},a=function(){return n.e(6).then(n.bind(null,"53Nh"))},u=function(){return n.e(5).then(n.bind(null,"J9VG"))},c=function(){return n.e(0).then(n.bind(null,"DlGW"))},p=function(){return n.e(1).then(n.bind(null,"2RNx"))},l=function(){return n.e(2).then(n.bind(null,"wajf"))},E=function(){return n.e(3).then(n.bind(null,"Dqi8"))};i.a.use(o.a),e.a=new o.a({mode:"history",routes:[{path:"/",name:"Home",component:s},{path:"/meetuplist",name:"MeetupList",component:a,beforeEnter:r.a},{path:"/meetupnew",name:"MeetupNew",component:u,beforeEnter:r.b},{path:"/meetupdetails/:id",name:"MeetupDetails",props:!0,component:c},{path:"/signup",name:"SignUp",component:p},{path:"/signin",name:"SignIn",component:l},{path:"/profile",name:"Profile",component:E},{path:"/*",redirect:"/"}]})},hlOO:function(t,e,n){"use strict";function i(t,e,n){r.a.getters.userIsAuthorized?n():n("/signin")}function o(t,e,n){r.a.getters.userIsAuthorized?n():n("/signup")}e.b=i,e.a=o;var r=n("IcnI")},xJD8:function(t,e,n){"use strict";e.a={data:function(){return{sideNav:!1}},methods:{onShowSideNav:function(){this.sideNav=!this.sideNav},onLogoutExistingUser:function(){this.$store.dispatch("onLogoutUser"),this.$router.push({name:"Home"})}},computed:{userAuthorized:function(){return this.$store.getters.userIsAuthorized},menuItems:function(){return this.userAuthorized?[{icon:"supervisor_account",title:"view meetups",path:"/meetuplist"},{icon:"room",title:"organize meetup",path:"/meetupnew"},{icon:"person",title:"profile",path:"/profile"}]:[{icon:"face",title:"sign up",path:"/signup"},{icon:"lock_open",title:"sign in",path:"/signin"}]}}}}},["NHnr"]);
//# sourceMappingURL=app.95330564c1e7ba9d756d.js.map